{% extends 'base.html' %}

{% block content %}
<div class="hero-section">
    <div class="hero-content zoom-in">
        <h1>Detailed Tracking & <br><span class="highlight">Secure Delivery</span></h1>
        <p>Track your parcel's journey from origin to doorstep with our AI-powered system.</p>

        <div class="cta-group">
            <a href="/track" class="cta-btn primary pulse">üì¶ Track Live</a>
            <a href="/create_parcel" class="cta-btn secondary">üöÄ Send Parcel</a>
        </div>
    </div>
    <div class="hero-visual floating">
        <div class="parcel-3d-icon">üì¶</div>
    </div>
</div>

<div class="features-grid">
    <div class="feature-card glass-panel fade-in-delay-1">
        <div class="icon">üìç</div>
        <h3>Live Location</h3>
        <p>See exactly where your parcel is in real-time.</p>
    </div>
    <div class="feature-card glass-panel fade-in-delay-2">
        <div class="icon">üîí</div>
        <h3>Top Security</h3>
        <p>Verified handling with photo proof at every step.</p>
    </div>
    <div class="feature-card glass-panel fade-in-delay-3">
        <div class="icon">ü§ñ</div>
        <h3>AI Support</h3>
        <p>Get instant answers on how to track or ship.</p>
    </div>
</div>

<div class="feedback-section glass-panel slide-up">
    <h3>üí¨ We Value Your Feedback</h3>
    <form action="/feedback" method="POST" class="feedback-form">
        <input type="email" name="email" placeholder="Your Email" required>
        <textarea name="message" placeholder="Tell us about your experience..." required></textarea>
        <button type="submit" class="cta-btn">Submit Feedback</button>
    </form>
</div>

<!-- AI Help Chatbot Bubble -->
<div class="ai-chat-widget">
    <div class="chat-bubble" onclick="toggleChat()">
        ü§ñ Need Help?
    </div>
    <div class="chat-window" id="chatWindow" style="display: none;">
        <div class="chat-header">
            TrackSwift AI
            <span class="close-chat" onclick="toggleChat()">√ó</span>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="msg bot">Hi! I can help you track a parcel or schedule a pickup. What do you need?</div>
        </div>
        <div class="chat-input">
            <input type="text" id="userMsg" placeholder="Type here..." onkeypress="handleChat(event)">
        </div>
    </div>
</div>

<script>
    function toggleChat() {
        var chat = document.getElementById('chatWindow');
        chat.style.display = chat.style.display === 'none' ? 'flex' : 'none';
    }

    function handleChat(e) {
        if (e.key === 'Enter') {
            var input = document.getElementById('userMsg');
            var text = input.value;
            if (!text) return;

            var body = document.getElementById('chatBody');
            body.innerHTML += '<div class="msg user">' + text + '</div>';
            input.value = '';

            // Auto Scroll
            body.scrollTop = body.scrollHeight;

            // Simple Bot Logic
            setTimeout(() => {
                var reply = "I can verify that for you. Please use the 'Track Live' button above!";
                if (text.toLowerCase().includes('send') || text.toLowerCase().includes('ship')) {
                    reply = "To send a parcel, click 'Send Parcel' on the home page and fill the form.";
                } else if (text.toLowerCase().includes('contact') || text.toLowerCase().includes('call')) {
                    reply = "You can reach us at +91 96572 65104.";
                }
                body.innerHTML += '<div class="msg bot">' + reply + '</div>';
                body.scrollTop = body.scrollHeight;
            }, 800);
        }
    }
</script>
{% endblock %}